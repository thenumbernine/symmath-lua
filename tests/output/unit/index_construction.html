<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>tests/unit/index_construction</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
		<link rel='stylesheet' href='../darkmode.css'></link>
		<script type='text/javascript' src='../darkmode.js'></script>
	</head>
	<body>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b>upper by default</b><br>
<pre>local x=a'i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</pre>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.133000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'^i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</pre>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.079000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'_i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true})</pre>
</td><td>
${ a} _i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.066000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=false})</pre>
</td><td>
${{ a} ^i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.321000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'i_j' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=true})</pre>
</td><td>
${{ a} ^i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.089000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'^ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=false})</pre>
</td><td>
${{ a} ^i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.134000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'^i_j'	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=true})</pre>
</td><td>
${{ a} ^i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.078000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'_i^j'	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true} and x[3]==Tensor.Index{symbol='j', lower=false})</pre>
</td><td>
${{ a} _i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.090000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'_ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true} and x[3]==Tensor.Index{symbol='j', lower=true})</pre>
</td><td>
${{ a} _i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.081000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>multi-char</b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>upper by default</b><br>
<pre>local x=a' i' 			print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</pre>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.304000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b>upper by default</b><br>
<pre>local x=a' \\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false})</pre>
</td><td>
${ a} ^{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.132000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a' ^\\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false})</pre>
</td><td>
${ a} ^{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.135000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a' _\\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=true})</pre>
</td><td>
${ a} _{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.170000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a' \\mu \\nu' print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false} and x[3]==Tensor.Index{symbol='\\nu', lower=false})</pre>
</td><td>
${{ a} ^{\mu}} ^{\nu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.208000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>commas are lower by default</b><br>
<pre>local x=a',i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</pre>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.089000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a',^i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false, derivative=','})</pre>
</td><td>
${ a} ^{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.082000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a',_i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</pre>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.069000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'^,i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false, derivative=','})</pre>
</td><td>
${ a} ^{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.068000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre>local x=a'_,i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</pre>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.113000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>TODO multiple indexes with commas mixed</b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>TODO multiple indexes with commas mixed with multiple chars</b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<pre></pre>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<pre>simplifyAssertNe(a'^,i', a'_,i')</pre>
</td><td>
${{ a} ^{,i}} \ne {{ a} _{,i}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 2.202000ms<br>
stack: size: 7<br><ul style="margin:0px"><li>Init<br><li>Prune<br><li>Expand<br><li>Prune<br><li>Factor<br><li>Prune<br><li>Tidy</ul>
</td></tr>
