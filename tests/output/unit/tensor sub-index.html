<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>tests/unit/tensor sub-index</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
	
		<style>
:root {
	--font-color: #000000;
	--bg-color: rgb(243,243,243);
}
[data-theme="dark"] {
	--font-color: #ffffff;
	--bg-color: #000000;
}

body {
	overflow : scroll;
	background : var(--bg-color);
	color : var(--font-color);
}

/* desktop chrome inputs have white background black font.  mobile chrome inputs have clear background black font. */
input {
	background : var(--bg-color);
	color : var(--font-color);
}
		</style>
		<script type='text/javascript'>
//https://stackoverflow.com/questions/56300132/how-to-override-css-prefers-color-scheme-setting
window.addEventListener('load', () => {
	let darkMode = false;
	if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
		darkMode = true;
	}
	if (darkMode) {
		document.documentElement.setAttribute('data-theme', 'dark');
	} else {
		document.documentElement.removeAttribute('data-theme', 'dark');
	}
});
		</script>


	</head>
	<body>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b></b><br>
<code>printbr(T)</code>
</td><td>
$\overset{a\downarrow b\rightarrow}{\left[\begin{array}{ccc} {T_{xx}}& {T_{xy}}& {T_{xz}}\\ {T_{yx}}& {T_{yy}}& {T_{yz}}\\ {T_{zx}}& {T_{zy}}& {T_{zz}}\end{array}\right]}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 0.315000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>writing apparently does</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_ij':prune())		assertEq(T'_ij':prune(), T)</code>
</td><td>
$\overset{i\downarrow j\rightarrow}{\left[\begin{array}{ccc} {T_{xx}}& {T_{xy}}& {T_{xz}}\\ {T_{yx}}& {T_{yy}}& {T_{yz}}\\ {T_{zx}}& {T_{zy}}& {T_{zz}}\end{array}\right]}$
<br>
${\overset{i\downarrow j\rightarrow}{\left[\begin{array}{ccc} {T_{xx}}& {T_{xy}}& {T_{xz}}\\ {T_{yx}}& {T_{yy}}& {T_{yz}}\\ {T_{zx}}& {T_{zy}}& {T_{zz}}\end{array}\right]}} = {\overset{a\downarrow b\rightarrow}{\left[\begin{array}{ccc} {T_{xx}}& {T_{xy}}& {T_{xz}}\\ {T_{yx}}& {T_{yy}}& {T_{yz}}\\ {T_{zx}}& {T_{zy}}& {T_{zz}}\end{array}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 5.626000ms<br>
stack: size: 9<br><ul style="margin:0px"><li>Init<br><li>Prune<br><li>Expand<br><li>Prune<br><li>Factor<br><li>Prune<br><li>Tidy<br><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_xx':prune())		assertEq(T'_xx':prune(), T[1][1])</code>
</td><td>
${T_{xx}}$
<br>
${{T_{xx}}} = {{T_{xx}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.774000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_xy':prune())		assertEq(T'_xy':prune(), T[1][2])</code>
</td><td>
${T_{xy}}$
<br>
${{T_{xy}}} = {{T_{xy}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.469000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_xz':prune())		assertEq(T'_xz':prune(), T[1][3])</code>
</td><td>
${T_{xz}}$
<br>
${{T_{xz}}} = {{T_{xz}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.140000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_yx':prune())		assertEq(T'_yx':prune(), T[2][1])</code>
</td><td>
${T_{yx}}$
<br>
${{T_{yx}}} = {{T_{yx}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.198000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_yy':prune())		assertEq(T'_yy':prune(), T[2][2])</code>
</td><td>
${T_{yy}}$
<br>
${{T_{yy}}} = {{T_{yy}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 0.935000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_yz':prune())		assertEq(T'_yz':prune(), T[2][3])</code>
</td><td>
${T_{yz}}$
<br>
${{T_{yz}}} = {{T_{yz}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 0.898000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_zx':prune())		assertEq(T'_zx':prune(), T[3][1])</code>
</td><td>
${T_{zx}}$
<br>
${{T_{zx}}} = {{T_{zx}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 0.912000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_zy':prune())		assertEq(T'_zy':prune(), T[3][2])</code>
</td><td>
${T_{zy}}$
<br>
${{T_{zy}}} = {{T_{zy}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.285000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_zz':prune())		assertEq(T'_zz':prune(), T[3][3])</code>
</td><td>
${T_{zz}}$
<br>
${{T_{zz}}} = {{T_{zz}}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 0.888000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_xp':prune())		assertEq(T'_xp':prune(), Tensor('_p', T[1][2], T[1][3]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{xy}} \\ {T_{xz}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{xy}} \\ {T_{xz}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{xy}} \\ {T_{xz}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.845000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_yp':prune())		assertEq(T'_yp':prune(), Tensor('_p', T[2][2], T[2][3]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{yz}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{yz}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{yz}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 3.759000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_zp':prune())		assertEq(T'_zp':prune(), Tensor('_p', T[3][2], T[3][3]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{zy}} \\ {T_{zz}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{zy}} \\ {T_{zz}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{zy}} \\ {T_{zz}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 2.082000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_px':prune())		assertEq(T'_px':prune(), Tensor('_p', T[2][1], T[3][1]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{yx}} \\ {T_{zx}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{yx}} \\ {T_{zx}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{yx}} \\ {T_{zx}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 2.336000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_py':prune())		assertEq(T'_py':prune(), Tensor('_p', T[2][2], T[3][2]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{zy}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{zy}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{yy}} \\ {T_{zy}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.213000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_pz':prune())		assertEq(T'_pz':prune(), Tensor('_p', T[2][3], T[3][3]))</code>
</td><td>
$\overset{p\downarrow}{\left[\begin{matrix} {T_{yz}} \\ {T_{zz}}\end{matrix}\right]}$
<br>
${\overset{p\downarrow}{\left[\begin{matrix} {T_{yz}} \\ {T_{zz}}\end{matrix}\right]}} = {\overset{p\downarrow}{\left[\begin{matrix} {T_{yz}} \\ {T_{zz}}\end{matrix}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.260000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr(T'_pq':prune())		assertEq(T'_pq':prune(), Tensor('_pq', {T[2][2], T[2][3]}, {T[3][2], T[3][3]}))</code>
</td><td>
$\overset{p\downarrow q\rightarrow}{\left[\begin{array}{cc} {T_{yy}}& {T_{yz}}\\ {T_{zy}}& {T_{zz}}\end{array}\right]}$
<br>
${\overset{p\downarrow q\rightarrow}{\left[\begin{array}{cc} {T_{yy}}& {T_{yz}}\\ {T_{zy}}& {T_{zz}}\end{array}\right]}} = {\overset{p\downarrow q\rightarrow}{\left[\begin{array}{cc} {T_{yy}}& {T_{yz}}\\ {T_{zy}}& {T_{zz}}\end{array}\right]}}$
<br>

<span style="color:green">GOOD</span>
</td><td>
time: 1.271000ms<br>
stack: size: 2<br><ul style="margin:0px"><li>Tensor.Ref:Prune:apply<br><li>Tensor.Ref:Prune:apply</ul>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>reading by __index doesn't work?</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>I guess only writing by __index does for now</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>but why bother read by __index when you can just use the __call operator with strings?</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_ij'])		assertEq(T['_ij'], T)</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_xx'])		assertEq(T['_xx'], T[1][1])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_xy'])		assertEq(T['_xy'], T[1][2])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_xz'])		assertEq(T['_xz'], T[1][3])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_yx'])		assertEq(T['_yx'], T[2][1])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_yy'])		assertEq(T['_yy'], T[2][2])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_yz'])		assertEq(T['_yz'], T[2][3])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_zx'])		assertEq(T['_zx'], T[3][1])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_zy'])		assertEq(T['_zy'], T[3][2])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_zz'])		assertEq(T['_zz'], T[3][3])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_xp'])		assertEq(T['_xp'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_yp'])		assertEq(T['_yp'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_zp'])		assertEq(T['_zp'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_px'])		assertEq(T['_px'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_py'])		assertEq(T['_py'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_pz'])		assertEq(T['_pz'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>printbr(T['_pq'])		assertEq(T['_pq'])</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
